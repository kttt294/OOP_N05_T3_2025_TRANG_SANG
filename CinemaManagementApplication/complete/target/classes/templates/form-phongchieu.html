<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thêm Phòng Chiếu Mới</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-film me-2"></i>Cinema Management
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/"><i class="fas fa-home me-1"></i>Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/khachhang"><i class="fas fa-users me-1"></i>Khách hàng</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/phim"><i class="fas fa-video me-1"></i>Phim</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/ve"><i class="fas fa-ticket-alt me-1"></i>Vé</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/suatchieu"><i class="fas fa-calendar-alt me-1"></i>Suất chiếu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/phongchieu"><i class="fas fa-building me-1"></i>Phòng chiếu</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-building me-2"></i>Thêm Phòng Chiếu Mới
                        </h4>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-0">
                            <i class="fas fa-info-circle me-2"></i>
                            Vui lòng điền đầy đủ thông tin phòng chiếu. Các trường có dấu * là bắt buộc.
                        </p>
                    </div>
                </div>
                
                <div class="card shadow">
                    <div class="card-body p-4">
                        <form th:action="@{/phongchieu/create}" method="post" id="roomForm">
                            <!-- Basic Information -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">
                                        <i class="fas fa-info-circle me-2"></i>Thông Tin Cơ Bản
                                    </h5>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="maPhongChieu" class="form-label">
                                            <i class="fas fa-hashtag me-1"></i>Mã phòng chiếu <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="maPhongChieu" name="maPhongChieu" 
                                               placeholder="Nhập mã phòng chiếu" required>
                                        <div class="form-text">Mã phòng chiếu duy nhất</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="tenPhongChieu" class="form-label">
                                            <i class="fas fa-building me-1"></i>Tên phòng chiếu <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="tenPhongChieu" name="tenPhongChieu" 
                                               placeholder="Nhập tên phòng chiếu" required>
                                        <div class="form-text">Ví dụ: Phòng 1, Phòng VIP, IMAX 1</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Capacity and Layout -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">
                                        <i class="fas fa-chair me-2"></i>Sức Chứa và Bố Trí
                                    </h5>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="soGhe" class="form-label">
                                            <i class="fas fa-users me-1"></i>Số ghế <span class="text-danger">*</span>
                                        </label>
                                        <input type="number" class="form-control" id="soGhe" name="soGhe" 
                                               placeholder="Nhập số ghế" min="1" max="500" required>
                                        <div class="form-text">Số ghế từ 1 đến 500</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="soHang" class="form-label">
                                            <i class="fas fa-th-large me-1"></i>Số hàng ghế
                                        </label>
                                        <input type="number" class="form-control" id="soHang" name="soHang" 
                                               placeholder="Nhập số hàng" min="1" max="50">
                                        <div class="form-text">Số hàng ghế (tự động tính nếu để trống)</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Room Type and Technology -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">
                                        <i class="fas fa-cog me-2"></i>Loại Phòng và Công Nghệ
                                    </h5>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="loaiPhong" class="form-label">
                                            <i class="fas fa-film me-1"></i>Loại phòng <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="loaiPhong" name="loaiPhong" required>
                                            <option value="">Chọn loại phòng</option>
                                            <option value="2D">2D - Phòng chiếu thường</option>
                                            <option value="3D">3D - Phòng chiếu 3D</option>
                                            <option value="IMAX">IMAX - Phòng chiếu IMAX</option>
                                            <option value="4DX">4DX - Phòng chiếu 4DX</option>
                                            <option value="VIP">VIP - Phòng chiếu VIP</option>
                                        </select>
                                        <div class="form-text">Chọn loại phòng chiếu</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="trangThietBi" class="form-label">
                                            <i class="fas fa-tools me-1"></i>Trang thiết bị
                                        </label>
                                        <textarea class="form-control" id="trangThietBi" name="trangThietBi" rows="3" 
                                                  placeholder="Mô tả trang thiết bị"></textarea>
                                        <div class="form-text">Mô tả các thiết bị trong phòng</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Status and Location -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">
                                        <i class="fas fa-map-marker-alt me-2"></i>Trạng Thái và Vị Trí
                                    </h5>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="trangThai" class="form-label">
                                            <i class="fas fa-info-circle me-1"></i>Trạng thái <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="trangThai" name="trangThai" required>
                                            <option value="HoatDong">Hoạt động</option>
                                            <option value="BaoTri">Bảo trì</option>
                                            <option value="NgungHoatDong">Ngừng hoạt động</option>
                                        </select>
                                        <div class="form-text">Trạng thái hiện tại của phòng</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="viTri" class="form-label">
                                            <i class="fas fa-map-marker-alt me-1"></i>Vị trí
                                        </label>
                                        <input type="text" class="form-control" id="viTri" name="viTri" 
                                               placeholder="Nhập vị trí phòng">
                                        <div class="form-text">Ví dụ: Tầng 1, Khu A, Góc Đông Bắc</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Information -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">
                                        <i class="fas fa-clipboard-list me-2"></i>Thông Tin Bổ Sung
                                    </h5>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label for="moTa" class="form-label">
                                            <i class="fas fa-edit me-1"></i>Mô tả
                                        </label>
                                        <textarea class="form-control" id="moTa" name="moTa" rows="4" 
                                                  placeholder="Mô tả chi tiết về phòng chiếu"></textarea>
                                        <div class="form-text">Mô tả chi tiết về phòng chiếu, đặc điểm, lưu ý</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="row">
                                <div class="col-12">
                                    <hr class="my-4">
                                    <div class="d-flex justify-content-between">
                                        <a href="/phongchieu" class="btn btn-secondary">
                                            <i class="fas fa-arrow-left me-2"></i>Quay lại
                                        </a>
                                        <div>
                                            <button type="reset" class="btn btn-outline-secondary me-2">
                                                <i class="fas fa-undo me-2"></i>Làm mới
                                            </button>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i>Thêm Phòng Chiếu
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Help Section -->
                <div class="card shadow-sm mt-4">
                    <div class="card-header bg-info text-white">
                        <h6 class="mb-0">
                            <i class="fas fa-question-circle me-2"></i>Hướng Dẫn
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-info">Thông tin bắt buộc:</h6>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check text-success me-2"></i>Mã phòng chiếu</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Tên phòng chiếu</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Số ghế</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Loại phòng</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Trạng thái</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-info">Thông tin tùy chọn:</h6>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-info text-primary me-2"></i>Số hàng ghế</li>
                                    <li><i class="fas fa-info text-primary me-2"></i>Trang thiết bị</li>
                                    <li><i class="fas fa-info text-primary me-2"></i>Vị trí</li>
                                    <li><i class="fas fa-info text-primary me-2"></i>Mô tả</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Form validation
        document.getElementById('roomForm').addEventListener('submit', function(e) {
            const maPhongChieu = document.getElementById('maPhongChieu').value;
            const tenPhongChieu = document.getElementById('tenPhongChieu').value;
            const soGhe = document.getElementById('soGhe').value;
            const loaiPhong = document.getElementById('loaiPhong').value;
            const trangThai = document.getElementById('trangThai').value;
            
            if (!maPhongChieu || !tenPhongChieu || !soGhe || !loaiPhong || !trangThai) {
                alert('Vui lòng điền đầy đủ thông tin bắt buộc!');
                e.preventDefault();
                return;
            }
            
            if (parseInt(soGhe) < 1 || parseInt(soGhe) > 500) {
                alert('Số ghế phải từ 1 đến 500!');
                e.preventDefault();
                return;
            }
            
            const soHang = document.getElementById('soHang').value;
            if (soHang && (parseInt(soHang) < 1 || parseInt(soHang) > 50)) {
                alert('Số hàng ghế phải từ 1 đến 50!');
                e.preventDefault();
                return;
            }
        });

        // Auto-generate room code
        document.getElementById('maPhongChieu').addEventListener('focus', function() {
            if (!this.value) {
                const now = new Date();
                const code = 'PC' + now.getFullYear() + 
                            String(now.getMonth() + 1).padStart(2, '0') + 
                            String(now.getDate()).padStart(2, '0') + 
                            String(now.getHours()).padStart(2, '0') + 
                            String(now.getMinutes()).padStart(2, '0');
                this.value = code;
            }
        });

        // Auto-calculate number of rows based on seats
        document.getElementById('soGhe').addEventListener('input', function() {
            const soHang = document.getElementById('soHang');
            if (!soHang.value && this.value) {
                const seats = parseInt(this.value);
                if (seats > 0) {
                    // Estimate rows based on typical cinema layout (about 15-20 seats per row)
                    const estimatedRows = Math.ceil(seats / 15);
                    soHang.value = Math.min(estimatedRows, 50);
                }
            }
        });

        // Auto-fill room name based on type
        document.getElementById('loaiPhong').addEventListener('change', function() {
            const tenPhongChieu = document.getElementById('tenPhongChieu');
            if (!tenPhongChieu.value && this.value) {
                const roomNames = {
                    '2D': 'Phòng 2D',
                    '3D': 'Phòng 3D',
                    'IMAX': 'Phòng IMAX',
                    '4DX': 'Phòng 4DX',
                    'VIP': 'Phòng VIP'
                };
                tenPhongChieu.value = roomNames[this.value] || '';
            }
        });
    </script>
</body>
</html>
