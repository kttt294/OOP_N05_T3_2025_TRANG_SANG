<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thêm Đồ Ăn Mới</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .custom-navbar {
            background-color: #50B2C0 !important;
        }

        .navbar-nav .nav-link {
            font-weight: 600;
            font-size: 1.05rem;
            padding: 0.5rem 1rem;
            color: #212529 !important;
            transition: all 0.3s ease;
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-section h5 {
            color: #495057;
            border-bottom: 2px solid #50B2C0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light custom-navbar">
        <div class="container-xl">
            <a class="navbar-brand" href="/">
                <i class="fas fa-film me-2"></i>Cinema Management
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/phim">Phim</a></li>
                    <li class="nav-item"><a class="nav-link" href="/khachhang">Khách hàng</a></li>
                    <li class="nav-item"><a class="nav-link" href="/ve">Vé</a></li>
                    <li class="nav-item"><a class="nav-link" href="/ghe">Ghế</a></li>
                    <li class="nav-item"><a class="nav-link" href="/voucher">Voucher</a></li>
                    <li class="nav-item"><a class="nav-link" href="/doan">Đồ ăn</a></li>
                    <li class="nav-item"><a class="nav-link" href="/danhgia">Đánh giá</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-md-8">
                <h2><i class="fas fa-utensils me-2"></i>Thêm Đồ Ăn Mới</h2>
                <p class="text-muted">Tạo đồ ăn mới cho thực đơn</p>
            </div>
            <div class="col-md-4 text-end">
                <a href="/doan" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Quay lại
                </a>
            </div>
        </div>

        <!-- Alert Messages -->
        <div th:if="${message}" class="alert alert-info alert-dismissible fade show" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            <span th:text="${message}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <form th:action="@{/doan/create}" method="post" id="doAnForm">
                <!-- Basic Information Section -->
                <div class="form-section">
                    <h5><i class="fas fa-info-circle me-2"></i>Thông tin cơ bản</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="maDoAn" class="form-label">Mã đồ ăn *</label>
                                <input type="text" class="form-control" id="maDoAn" name="maDoAn" 
                                       placeholder="VD: DA001" required>
                                <div class="form-text">Mã đồ ăn phải là duy nhất</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="tenDoAn" class="form-label">Tên đồ ăn *</label>
                                <input type="text" class="form-control" id="tenDoAn" name="tenDoAn" 
                                       placeholder="VD: Bắp rang bơ" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category and Price Section -->
                <div class="form-section">
                    <h5><i class="fas fa-tags me-2"></i>Danh mục và giá</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="danhMuc" class="form-label">Danh mục *</label>
                                <select class="form-select" id="danhMuc" name="danhMuc" required>
                                    <option value="">Chọn danh mục</option>
                                    <option value="NuocUong">Nước uống</option>
                                    <option value="BanhKeo">Bánh kẹo</option>
                                    <option value="FastFood">Fast food</option>
                                    <option value="TraiCay">Trái cây</option>
                                    <option value="DoAnNhanh">Đồ ăn nhanh</option>
                                </select>
                                <div class="form-text">Phân loại đồ ăn</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="gia" class="form-label">Giá (VNĐ) *</label>
                                <input type="number" class="form-control" id="gia" name="gia" 
                                       min="1000" step="1000" placeholder="VD: 25000" required>
                                <div class="form-text">Giá từ 1,000 VNĐ trở lên</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quantity and Status Section -->
                <div class="form-section">
                    <h5><i class="fas fa-boxes me-2"></i>Số lượng và trạng thái</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="soLuong" class="form-label">Số lượng *</label>
                                <input type="number" class="form-control" id="soLuong" name="soLuong" 
                                       min="0" placeholder="VD: 100" required>
                                <div class="form-text">Số lượng có sẵn</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="trangThai" class="form-label">Trạng thái *</label>
                                <select class="form-select" id="trangThai" name="trangThai" required>
                                    <option value="">Chọn trạng thái</option>
                                    <option value="ConHang">Còn hàng</option>
                                    <option value="HetHang">Hết hàng</option>
                                    <option value="NgungBan">Ngừng bán</option>
                                </select>
                                <div class="form-text">Trạng thái hiện tại</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Description Section -->
                <div class="form-section">
                    <h5><i class="fas fa-edit me-2"></i>Mô tả</h5>
                    <div class="mb-3">
                        <label for="moTa" class="form-label">Mô tả</label>
                        <textarea class="form-control" id="moTa" name="moTa" rows="4" 
                                  placeholder="Mô tả chi tiết về đồ ăn, thành phần, hương vị..."></textarea>
                        <div class="form-text">Mô tả không bắt buộc</div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" onclick="resetForm()">
                        <i class="fas fa-undo me-2"></i>Làm mới
                    </button>
                    <div>
                        <a href="/doan" class="btn btn-outline-secondary me-2">
                            <i class="fas fa-times me-2"></i>Hủy
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Lưu Đồ Ăn
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Handle form submission
            $('#doAnForm').on('submit', function(e) {
                e.preventDefault();
                
                if (validateForm()) {
                    console.log('Validation passed, submitting form...');
                    this.submit();
                }
            });
        });

        function validateForm() {
            // Basic validation
            var maDoAn = $('#maDoAn').val().trim();
            var tenDoAn = $('#tenDoAn').val().trim();
            var danhMuc = $('#danhMuc').val();
            var gia = parseInt($('#gia').val());
            var soLuong = parseInt($('#soLuong').val());
            var trangThai = $('#trangThai').val();

            console.log('Form data:', {
                maDoAn: maDoAn,
                tenDoAn: tenDoAn,
                danhMuc: danhMuc,
                gia: gia,
                soLuong: soLuong,
                trangThai: trangThai
            });

            if (!maDoAn || !tenDoAn || !danhMuc || !gia || !soLuong || !trangThai) {
                alert('Vui lòng điền đầy đủ thông tin bắt buộc!');
                return false;
            }

            if (gia < 1000) {
                alert('Giá phải từ 1,000 VNĐ trở lên!');
                return false;
            }

            if (soLuong < 0) {
                alert('Số lượng không được âm!');
                return false;
            }

            return true;
        }

        function resetForm() {
            if (confirm('Bạn có chắc chắn muốn làm mới form?')) {
                $('#doAnForm')[0].reset();
                $('.is-invalid').removeClass('is-invalid');
                $('.invalid-feedback').remove();
            }
        }
    </script>
</body>
</html>

